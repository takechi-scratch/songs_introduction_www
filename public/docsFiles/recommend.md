## 診断のしくみ（詳しい情報）

おすすめ曲診断は以下の手順で行われます。
1. 公開日時・提供曲かどうかの条件で絞り込み、ランダムにいくつかの曲（5曲～20曲）を選出。これをサンプル曲と呼びます。
2. 「どちらの曲が好きですか？」で2択を選んでもらい、サンプル曲における、選んだ人の好みのランキングを作成。
3. サンプル曲に「似ている曲」を分析データから取得して、おすすめ曲として表示。

曲ごとに「好みスコア」（類似度の重み付き平均）を計算して、高い順におすすめ曲としています。
ここで、
1. サンプル曲内のランキングが高いほど、好みスコアへの影響度が大きいようにする
2. サンプル曲との「類似度」が高いほど、好みスコアへ大きく反映させる

ようにしています。

この強め具合をどのくらいにしたら最適かはよく分かっていないため、現在いろいろ試しているところです。
ちなみに、上の「パターン2」が、1の影響を強めたもので、「パターン3」が、2の影響を強めたものです。

みなさんの診断の感想があると、おすすめの精度をよりよくする助けになります。
どのパターンが良かったか教えてくれると嬉しいです！

診断アルゴリズムのコードは、[GitHub](https://github.com/takechi-scratch/songs_introduction_www/blob/main/src/app/recommend/result/page.tsx)で公開しています。興味のある方はぜひ見てみてください。
